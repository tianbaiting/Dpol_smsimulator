# 可视化测试配置 - 使用 Pencil 束流

# 打开 OpenGL 可视化
/vis/open OGL

# 输出文件设置
/action/file/OverWrite y
/action/file/RunName test_vis_run
/action/file/SaveDirectory data/simulation/output_tree

# 加载几何配置
/control/execute configs/simulation/geometry/5deg_1.2T.mac

# Z-X 视图
/vis/viewer/set/upVector 1 0 0
/vis/viewer/set/viewpointThetaPhi 90. 90.

# 绘制几何体
/vis/drawVolume

# 添加坐标轴
/vis/scene/add/axes 0 0 0 6000 mm

# 设置轨迹显示
/vis/scene/endOfEventAction accumulate
/vis/scene/add/trajectories smooth
/vis/modeling/trajectories/create/drawByCharge
/vis/modeling/trajectories/drawByCharge-0/default/setDrawStepPts true
/vis/modeling/trajectories/drawByCharge-0/default/setStepPtsSize 1

# 启用轨迹存储（可视化需要）
/tracking/storeTrajectory 1

# 使用 Pencil 束流类型
/action/gun/Type Pencil
/action/gun/Position 0 0 -200 cm
/action/gun/SetBeamParticleName proton
/action/gun/Energy 190 MeV

# 运行1个事件进行可视化
/run/beamOn 1
/vis/viewer/flush
