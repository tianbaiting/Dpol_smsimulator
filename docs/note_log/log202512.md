# 2025 12 æœˆ notebook

## 2025-12-02

æ›´æ¢äº†qmdç‰¹å¾åŠ¨é‡çš„å¤§å°,ä»600MeV/cæ”¹ä¸º627MeV/c,ä»¥æ›´å¥½åœ°åŒ¹é…å®éªŒæ•°æ®.

Changed the QMD characteristic momentum from 600 MeV/c to 627 MeV/c to better match experimental data.

$P = \sqrt{(E)^2 - (m)^2} = \sqrt{(190+938)^2 - (938)^2} MeV/c = 625.5MeV/c$

## 2025-12-03

change homebrew g++ cmake root to conda-forge versions.

use micromaba . .yml to create a env for anaroot . useing root and geant4 in conda-forge

```yml
name: anaroot-env
channels:
  - conda-forge
dependencies:
  - python=3.10
  - cmake
  - make
  - git
  - wget
  - pkg-config
  - gcc_linux-64
  - gxx_linux-64
  - root
  - geant4
  - xerces-c
  - fftw
  - gsl
  - libxml2
  - libpng
  - zlib
  - swig
  - pip
  - xorg-libx11
  - xorg-libxpm
  - xorg-libxft

```

```
# åˆå§‹åŒ– micromamba
eval "$(micromamba shell hook -s bash)"  # æˆ– -s zsh

å¯é€‰ï¼šè‡ªåŠ¨æ¿€æ´» anaroot ç¯å¢ƒ
micromamba activate anaroot-env
```


direnv is an open-source extension that automatically loads and executes the environment variables and scripts defined in a .envrc file when you enter (cd into) a directory containing one. It automatically unloads those variables when you leave the directory.

```
# Auto-generated .envrc for Dpol_smsimulator
# This file will be executed by direnv when you cd into the project root.
# Ensure micromamba is initialized in this shell (zsh) before using `micromamba activate`.
# Keep this file small and review before allowing with `direnv allow`.

# Initialize micromamba shell hook for zsh (direnv runs this file with your login shell)
if command -v micromamba >/dev/null 2>&1; then
  eval "$(micromamba shell hook --shell zsh)"
fi

# Source the project setup which performs activation and exports variables
if [[ -f ./setup_spana.sh ]]; then
  source ./setup_spana.sh
fi
```


## 2025-12-05

æˆ‘å¸Œæœ›è°ƒå¤§åŠ¨é‡èŒƒå›´ã€‚ 

todo æ¢å¯»è´¨å­åŠ¨é‡ç©ºé—´ï¼ˆå¯è¢«æ¥å—çš„ç©ºé—´ï¼‰ç”»å‡ºä¸‰ç»´ç©ºé—´å›¾æ¥ï¼Œä»¥åŠåšå‡ºæ¥æ­¤æ—¶çš„pxp-pxn (æ— æ¨¡ç³Š åªfilter)

å–æ ·å¥½è¿˜æ˜¯å‚æ•°å–ç‚¹å¥½ã€‚ 

æ•°æ®çš„é€æ˜é€‰æ‹©,rootå¦‚ä½•åšåˆ°

I want to increase the momentum range. TODO: Explore the acceptable proton momentum space, visualize it in a 3D plot, and calculate $p_{p} - p_{n}$ (without blurring, only filtering). Which is better: sampling or parametric point scanning?



```bash
root -b -q $ROOTSYS/tutorials/legacy/benchmarks.C > rootbenchmarktest.txt
```

| name | root benchmark | cpu | description |   
|------|-----------------|-----|-------------|
| RIBFANA 04 | 5022 | Intel Xeon Gold 5218 @ 2.30GHz | riken |
| spana03| 4972 | Intel Xeon Platinum 8168 @ 2.70GHz | riken |
| ENPG | 2186 | Intel Xeon E5-2650 v4 @ 2.20GHz | zhigang group |
| SER5 MAX | 19444 | AMD Ryzen 7 5700H | tbt pc |
| Thinkpad X1 Carbon gen10 | 4945 | i7-1260P | tbt pc |

## 2025-12-9

ä½¿ç”¨hostname ä¸ºä¸åŒæœºå™¨åŠ è½½ä¸åŒçš„è½¯ä»¶è·¯å¾„

æŸ¥çœ‹rootæ•°æ®æ–‡ä»¶, 


## 2025-12-10

try to fix root .

.root æ–‡ä»¶è¢« TBrowser æ‰“å¼€ è‡ªåŠ¨å±•å¼€åµŒå¥—, åŠ è½½è‡ªå®šä¹‰ç±». éœ€è¦åˆ©ç”¨åå°„æœºåˆ¶. 

geant4 nebulaé‡Œé¢ä¼¼ä¹æ²¡æœ‰è¿™æ ·çš„å®ç°.  


https://tianbaiting.github.io/sci/minimal_code/cernrootData/


æå‡ºçš„è¿™ä¸ªé—®é¢˜éå¸¸å…³é”®ï¼Œå®ƒç›´æŒ‡ ROOT I/O çš„æ ¸å¿ƒâ€”â€”æ•°æ®é€æ˜åŒ–ï¼ˆInspectabilityï¼‰ï¼Œè¿™å¯¹äºç²’å­ç‰©ç†å­¦ä¸­çš„æ•°æ®å®¡æŸ¥å’Œè°ƒè¯•æ˜¯è‡³å…³é‡è¦çš„ã€‚

æ‚¨åœ¨ TBrowser ä¸­æ— æ³•æŸ¥çœ‹è‡ªå®šä¹‰ç±»å†…éƒ¨å˜é‡çš„æ•°å€¼ï¼Œå…¶æ ¹æœ¬åŸå› åœ¨äº ROOT ç¼ºä¹è¯»å–å’Œç†è§£è¯¥å¯¹è±¡å†…å­˜ç»“æ„æ‰€éœ€çš„â€œè·¯çº¿å›¾â€ã€‚è¿™ä¸ªâ€œè·¯çº¿å›¾â€å°±æ˜¯æˆ‘ä»¬æ˜¨å¤©è°ˆåˆ°çš„å­—å…¸ä»¥åŠç”±å®ƒè¡ç”Ÿå‡ºçš„ Streamer Informationï¼ˆæµä¿¡æ¯ï¼‰ã€‚

ä¸‹é¢æˆ‘å°†è¯¦ç»†è§£é‡Šå¦‚ä½•æ»¡è¶³â€œé€æ˜åŒ–â€è¦æ±‚ï¼Œå¹¶ç»™å‡ºå…·ä½“çš„æ£€æŸ¥æ­¥éª¤ã€‚

è§£å†³ ROOT æ•°æ®é€æ˜åŒ–çš„æ ¸å¿ƒæ–¹æ³•
è¦è®© TBrowser æˆ–ä»»ä½• ROOT I/O å‡½æ•°ï¼ˆå¦‚ TTree::Scan()ï¼‰èƒ½å¤Ÿâ€œé€æ˜åŒ–â€åœ°è®¿é—®è‡ªå®šä¹‰ C++ ç±»çš„å†…éƒ¨å˜é‡ï¼Œå¿…é¡»æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š

1. ç¡®ä¿ç±»å’Œæˆå‘˜å˜é‡æ‹¥æœ‰å®Œæ•´çš„å­—å…¸å’Œæµä¿¡æ¯
æµä¿¡æ¯ï¼ˆStreamer Informationï¼‰ æ˜¯å­—å…¸æœºåˆ¶çš„æ ¸å¿ƒè¾“å‡ºï¼Œå®ƒåŒ…å«äº† ROOT åœ¨è¿è¡Œæ—¶è¯»å–å’Œå†™å…¥å¯¹è±¡æ‰€éœ€çš„æ‰€æœ‰å…ƒæ•°æ®ï¼š

ç±»çš„ç‰ˆæœ¬å· (ClassVersion)

æ‰€æœ‰é static å’Œé transient çš„æ•°æ®æˆå‘˜çš„åˆ—è¡¨ã€‚

æ¯ä¸ªæ•°æ®æˆå‘˜çš„ç±»å‹ã€åç§»é‡ï¼ˆoffset in memoryï¼‰å’Œåç§°ã€‚

å¦‚æœ Streamer Info ä¸å®Œæ•´æˆ–ç¼ºå¤±ï¼ŒTBrowser åªèƒ½çœ‹åˆ°ä¸€ä¸ªæŠ½è±¡çš„ç±»å¯¹è±¡ï¼ˆä¾‹å¦‚ MyEvent* æˆ– MyHitï¼‰ï¼Œä½†æ— æ³•â€œå±•å¼€â€å®ƒæ¥çœ‹é‡Œé¢çš„å˜é‡ã€‚

2. TBrowser çš„ç‰¹æ®Šè¦æ±‚ï¼šè®¿é—®æƒé™
TBrowser åœ¨è§£æç±»å¯¹è±¡æ—¶ï¼Œä¸»è¦ä¾èµ–äº Streamer Infoã€‚ä½†å¦‚æœæ‚¨å¸Œæœ› TBrowser ä¸ä»…èƒ½æ˜¾ç¤ºæ•°æ®æˆå‘˜ï¼Œè¿˜èƒ½é€šè¿‡å…¶å†…ç½®çš„æœºåˆ¶ï¼ˆå¦‚åŒå‡»ç»˜å›¾ï¼‰è¿›è¡Œäº¤äº’ï¼Œéœ€è¦æ³¨æ„ï¼š

éç§æœ‰æˆå‘˜ï¼š ç¡®ä¿æ‚¨å¸Œæœ›åœ¨ TBrowser ä¸­æŸ¥çœ‹å’Œäº¤äº’çš„æ•°æ®æˆå‘˜æ˜¯ public æˆ– protected çš„ã€‚è™½ç„¶ ROOT I/O æœºåˆ¶å¯ä»¥åºåˆ—åŒ– private æˆå‘˜ï¼ˆå› ä¸ºå®ƒæœ‰ Streamer Info çš„â€œç‰¹æƒâ€ï¼‰ï¼Œä½†åƒ TBrowser è¿™ç§é€šç”¨çš„äº¤äº’å¼å·¥å…·é€šå¸¸æ›´å€¾å‘äºæŸ¥çœ‹éç§æœ‰æˆå‘˜ã€‚

ğŸ› ï¸ æ»¡è¶³é€æ˜åŒ–è¦æ±‚çš„è¡ŒåŠ¨æ­¥éª¤
é’ˆå¯¹æ‚¨çš„æƒ…å†µï¼Œæ‚¨éœ€è¦æ£€æŸ¥å’Œä¿®æ­£ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š

1. æ£€æŸ¥å­—å…¸ç”Ÿæˆæ˜¯å¦å®Œæ•´
å›åˆ°æ˜¨å¤©çš„è®¨è®ºï¼Œæ‚¨éœ€è¦ç¡®ä¿æ‚¨çš„è‡ªå®šä¹‰ç±»æ˜¯åœ¨ ROOT çš„æ„å»ºç³»ç»Ÿä¸­æ­£ç¡®ç”Ÿæˆäº†å­—å…¸çš„ã€‚

æ­£ç¡®ä½¿ç”¨ rootclingï¼š ç¡®ä¿æ‚¨åœ¨ç¼–è¯‘è‡ªå®šä¹‰ç±»åº“æ—¶ï¼Œè¿è¡Œäº† rootcling å‘½ä»¤ï¼Œå¹¶ä¸”å®ƒæˆåŠŸå¤„ç†äº†æ‚¨çš„ç±»å¤´æ–‡ä»¶ã€‚

ä½¿ç”¨ + æ ‡è®°ï¼š åœ¨æ‚¨çš„ LinkDef.h æ–‡ä»¶ä¸­ï¼ŒåŠ¡å¿…åœ¨ç±»åååŠ ä¸Šä¸€ä¸ªåŠ å· +ï¼ˆä¾‹å¦‚ï¼š#pragma link C++ class MyCustomClass+;ï¼‰ã€‚è¿™ä¸ª + æ ‡è®°å‘Šè¯‰ rootcling ä¸ä»…è¦ç”Ÿæˆå­—å…¸ï¼Œè¿˜è¦ç”ŸæˆStreamer Infoã€‚

2. æ£€æŸ¥æ‰€æœ‰åµŒå¥—ç±»å‹æ˜¯å¦åŒ…å«åœ¨å­—å…¸ä¸­
å¦‚æœæ‚¨çš„è‡ªå®šä¹‰ç±»å†…éƒ¨åŒ…å«å…¶ä»–è‡ªå®šä¹‰ç±»ã€æ ‡å‡†å®¹å™¨ï¼ˆå¦‚ std::vectorï¼‰çš„ç‰¹å®šå®ä¾‹åŒ–ç‰ˆæœ¬ï¼Œæˆ–è€…æ¥è‡ªå…¶ä»–åº“çš„ ROOT å¯åºåˆ—åŒ–å¯¹è±¡ï¼ˆå¦‚ TLorentzVectorï¼‰ï¼Œé‚£ä¹ˆè¿™äº›åµŒå¥—ç±»å‹ä¹Ÿå¿…é¡»æœ‰å­—å…¸ã€‚

ç¤ºä¾‹ï¼š

å¦‚æœæ‚¨çš„ç±»å®šä¹‰å¦‚ä¸‹ï¼š

C++

class MyEvent {
private:
    std::vector<MyHit> fHits; // å†…éƒ¨æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç±»
    TLorentzVector fMomentum; // å†…éƒ¨æ˜¯ä¸€ä¸ªROOTæ ‡å‡†ç±»
    double fEnergy;           // å†…éƒ¨æ˜¯åŸºç¡€ç±»å‹
};
æ‚¨éœ€è¦åœ¨ LinkDef.h ä¸­è¿›è¡Œå£°æ˜ï¼š

C++

#pragma link C++ class MyHit+;
#pragma link C++ class MyEvent+;
#pragma link C++ class std::vector<MyHit>+; // è¿™ä¸€è¡Œè‡³å…³é‡è¦
// TLorentzVector é€šå¸¸ç”± ROOT è‡ªå¸¦å­—å…¸ï¼Œæ— éœ€æ‰‹åŠ¨å£°æ˜
å¦‚æœç¼ºå°‘ std::vector<MyHit>+; çš„å£°æ˜ï¼ŒROOT çŸ¥é“ MyEvent æœ‰ä¸€ä¸ªæˆå‘˜å« fHitsï¼Œä½†ä¸çŸ¥é“å¦‚ä½•å®‰å…¨åœ°è§£æ std::vector<MyHit> å†…éƒ¨çš„å…ƒç´ ç»“æ„ï¼Œè‡ªç„¶æ— æ³•åœ¨ TBrowser ä¸­å±•å¼€ã€‚

3. æ£€æŸ¥åº“æ˜¯å¦è¢«æ­£ç¡®åŠ è½½ï¼ˆAutoloadingï¼‰
å½“æ‚¨æ‰“å¼€ .root æ–‡ä»¶æ—¶ï¼Œå¦‚æœæ–‡ä»¶å†…çš„æ•°æ®ä¾èµ–äºæ‚¨çš„è‡ªå®šä¹‰ç±»ï¼ŒROOT å¿…é¡»çŸ¥é“å»å“ªé‡Œæ‰¾åˆ°åŒ…å«è¿™äº›ç±»å®šä¹‰çš„å…±äº«åº“ï¼ˆ.so æ–‡ä»¶ï¼‰ã€‚

å¦‚æœ TBrowser æç¤ºæ‰¾ä¸åˆ°ç±»ï¼š åœ¨å¯åŠ¨ ROOT ä¹‹å‰ï¼Œç¡®ä¿æ‚¨çš„åº“è·¯å¾„ï¼ˆåŒ…å« .so æ–‡ä»¶ï¼‰è¢«åŠ å…¥åˆ° LD_LIBRARY_PATH ç¯å¢ƒå˜é‡ä¸­ï¼Œå¹¶ä¸”æ‚¨çš„åº“æ–‡ä»¶å¤¹ä¸­å­˜åœ¨ ROOT è‡ªåŠ¨åŠ è½½æ‰€éœ€çš„ rootmap æ–‡ä»¶ã€‚

æ‰‹åŠ¨åŠ è½½ï¼š å¦‚æœè‡ªåŠ¨åŠ è½½å¤±è´¥ï¼Œæ‚¨å¯ä»¥åœ¨ ROOT å‘½ä»¤è¡Œä¸­æ‰‹åŠ¨åŠ è½½åº“ï¼š

C++

root [0] gSystem->Load("libMyAnalysis.so");
4. è¿è¡Œæ—¶æ£€æŸ¥ï¼šä½¿ç”¨ TClass
æ‚¨å¯ä»¥åœ¨ ROOT å‘½ä»¤è¡Œä¸­æ£€æŸ¥ä¸€ä¸ªç±»æ˜¯å¦æˆåŠŸç”Ÿæˆäº† Streamer Infoï¼š

åŠ è½½æ‚¨çš„åº“ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚

è·å–ç±»çš„ TClass å¯¹è±¡å¹¶æ£€æŸ¥å…¶ Streamer ä¿¡æ¯ã€‚

C++

root [0] TClass* cls = TClass::GetClass("MyEvent");
root [1] if (cls) cls->GetStreamerInfo()->Print();
å¦‚æœ Print() èƒ½å¤Ÿè¾“å‡ºè¯¦ç»†çš„ç±»æˆå‘˜åˆ—è¡¨ï¼Œåˆ™è¯´æ˜ Streamer Info å­˜åœ¨ï¼Œæ­¤æ—¶æ‚¨åº”è¯¥èƒ½é€šè¿‡ TBrowser æŸ¥çœ‹ã€‚å¦‚æœè¾“å‡ºä¸ºç©ºæˆ–æŠ¥é”™ï¼Œåˆ™å­—å…¸ç”Ÿæˆå¤±è´¥æˆ–ä¸å®Œæ•´ã€‚

ğŸ“š å®˜æ–¹ä¿¡æ¯æ¥æº
è¦æ·±å…¥äº†è§£ ROOT çš„ I/O å’Œ Streamer æœºåˆ¶ï¼Œå®˜æ–¹çš„ ROOT I/O and Persistency Guide æ˜¯æœ€é‡è¦çš„å‚è€ƒèµ„æ–™ã€‚

ROOT I/O and Persistency Guide - Streamer Informationï¼š

https://root.cern/manual/io_persistency/#streamer-information





kndon_smsimulator fix cmake find anaroot

æšä¸¾ $TARTSYS/lib ä¸‹çš„ ANAROOT åº“ã€‚
æ‰©å±• CMakeLists.txt çš„ find_library åˆ—è¡¨ï¼Œè¡¥å…¨å¿…è¦çš„ ANAROOT ç»„ä»¶åº“ã€‚
è¡¥å…… ROOT çš„ XML ç»„ä»¶ï¼Œä½¿ ANAROOT é‡Œä¾èµ–çš„ XML ç¬¦å·å¯è§£æã€‚
é‡å»ºå¹¶ç¡®è®¤ simtrace ç­‰ç›®æ ‡é“¾æ¥æˆåŠŸã€‚
æˆ‘åšäº†ä»€ä¹ˆ

åˆ—å‡º ANAROOT åº“ï¼šå‘ç°å­˜åœ¨ libanacore.so, libanaloop.so, libanacatana.so, libanadali.so, libanasamurai.so, libanabrips.so, libanaespri.so, libanasilicons.so, libanawinds.so ç­‰ã€‚
æ‰©å±• CMakeLists.txt çš„ ANAROOT æœç´¢ï¼š
ç°åœ¨ä¼šæŸ¥æ‰¾å¹¶é“¾æ¥ä¸Šè¿°ç»„ä»¶åº“ï¼ˆæŒ‰å­˜åœ¨æ€§è‡ªåŠ¨è¿½åŠ åˆ° ANAROOT_LIBRARIESï¼‰ï¼Œä¸ä»…ä»…æ˜¯ anaroot å’Œ XMLParserã€‚
è¡¥å…… ROOT ç»„ä»¶ï¼š
å°† find_package(ROOT REQUIRED COMPONENTS â€¦) å¢åŠ  XMLIO å’Œ XMLParserï¼Œä»¥æä¾› TDOMParser/TXMLDocument/TXMLNode ç­‰ç¬¦å·ï¼ˆANAROOT çš„ anacatana/anasamurai ä¾èµ–å®ƒä»¬ï¼‰ã€‚
é‡æ–°é…ç½®å’Œæ„å»ºï¼š
crosssectionã€get_pdgmassã€simtrace å…¨éƒ¨å·²æˆåŠŸé“¾æ¥å¹¶æ„å»ºå®Œæˆã€‚
ç›®å‰çŠ¶æ€

ç¼–è¯‘é”™è¯¯å·²ä¿®å¤ï¼Œæ‰€æœ‰ç›¸å…³ç›®æ ‡æˆåŠŸæ„å»ºã€‚
åç»­å¦‚æ–°å¢ ANAROOT ç»„ä»¶åº“ï¼Œå½“å‰ CMake ä¼šè‡ªåŠ¨å‘ç°å¹¶é“¾æ¥ï¼ˆåªè¦åº“ååœ¨åˆ—è¡¨ä¸­ï¼‰ã€‚
å¯é€‰åç»­



## 2025-12-11

fix vscode intellisense wrong include path . 

æ›´æ–°äº† c_cpp_properties.json:

æ·»åŠ äº† "compileCommands" å­—æ®µ,æŒ‡å‘ CMake ç”Ÿæˆçš„ç¼–è¯‘å‘½ä»¤æ•°æ®åº“
æ›´æ–°äº† C++ æ ‡å‡†ä¸º c++20 (ä¸ CMakeLists.txt ä¸€è‡´)
æ›´æ–°äº† CMakeLists.txt:

æ·»åŠ äº† set(CMAKE_EXPORT_COMPILE_COMMANDS ON),ç¡®ä¿æ¯æ¬¡ CMake é…ç½®æ—¶éƒ½ç”Ÿæˆ compile_commands.json
é‡æ–°é…ç½®äº† CMake:

ç”Ÿæˆäº† 113KB çš„ compile_commands.json æ–‡ä»¶,åŒ…å«æ‰€æœ‰ç¼–è¯‘å•å…ƒçš„å®Œæ•´ä¿¡æ¯



buy dpol detector åˆåŒ 


```
627*tan(10/180.0*TMath::Pi())
(double) 110.55702
```

![alt text](assets/log202512/image.png)

å…ˆåŠ  Neutron exit window,


æ ¹æ®konda çš„smsimulatoré‡Œé¢å„ç§é¡¹ç›®é‡Œ


```
  //------------------------------ exit window for neutrons
  fExitWindowNConstruction->ConstructSub();
  fExitWindowNConstruction->SetAngle(magAngle);
  fExitWindowNConstruction->PutExitWindow(experimentalHall_log);
  if (fNeutronWinSD==0){
    fNeutronWinSD = new FragmentSD("/NeutronWindow");
    SDMan->AddNewDetector(fNeutronWinSD);
```


```
//------------------------------ exit window for neutrons  
fExitWindowNConstruction->ConstructSub();  
fExitWindowNConstruction->SetAngle(magAngle);  
fExitWindowNConstruction->PutExitWindow(experimentalHall_log);  
  
if (fNeutronWinSD==0){  
  fNeutronWinSD = new FragmentSD("/NeutronWindow");  
  SDMan->AddNewDetector(fNeutronWinSD);  
}  
fExitWindowNConstruction->GetWindowVolume()->SetSensitiveDetector(fNeutronWinSD);
```

éœ€è¦åœ¨å¤´æ–‡ä»¶ä¸­æ·»åŠ çš„å£°æ˜
detector constructionå¤´æ–‡ä»¶ä¸­éœ€è¦æ·»åŠ ï¼š
```
class ExitWindowNConstruction;  
  
private:  
  ExitWindowNConstruction *fExitWindowNConstruction;  
  G4VSensitiveDetector* fNeutronWinSD;
```

æ„é€ å‡½æ•°ä¸­çš„åˆå§‹åŒ–
åœ¨æ„é€ å‡½æ•°ä¸­éœ€è¦åˆå§‹åŒ–ï¼š 

fExitWindowNConstruction = new ExitWindowNConstruction();

ææ„å‡½æ•°ä¸­çš„æ¸…ç†
åœ¨ææ„å‡½æ•°ä¸­éœ€è¦æ·»åŠ ï¼š

delete fExitWindowNConstruction;

å‘ç°æŠ¥é”™ device è‡ªæ¨¡å—å¦‚ä½•é›†æˆ. 

éœ€è¦é“¾æ¥smdevicesåº“

åœ¨smg4libé‡Œé¢æ·»åŠ , sim_deuteroné‡Œé¢æ·»åŠ , ç›¸å…³çš„cmakeè¯­å¥. 


![alt text](assets/log202512/image-1.png)


## 2025-12-12

æ·»åŠ  charged particle exit window 

 there are 2 exit windows 

 ```
libs/smg4lib/src/devices on î‚  main [âœ˜!?] via â–³ v3.31.6 via ğŸ v3.13.5 (.venv) 
â¯ tree                           
.
â”œâ”€â”€ CMakeLists.txt
â”œâ”€â”€ DipoleConstruction.cc
â”œâ”€â”€ DipoleConstruction.hh
â”œâ”€â”€ DipoleConstructionMessenger.cc
â”œâ”€â”€ DipoleConstructionMessenger.hh
â”œâ”€â”€ ExitWindowC1Construction.cc
â”œâ”€â”€ ExitWindowC1Construction.hh
â”œâ”€â”€ ExitWindowC2Construction.cc
â”œâ”€â”€ ExitWindowC2Construction.hh
â”œâ”€â”€ ExitWindowNConstruction.cc
â”œâ”€â”€ ExitWindowNConstruction.hh
â”œâ”€â”€ MagField.cc
â””â”€â”€ MagField.hh
```

C1ç‰ˆæœ¬: ä¸»è¦åœ¨simdayoneé¡¹ç›®ä¸­ä½¿ç”¨ DayoneDetectorConstruction.cc:198-210

C2ç‰ˆæœ¬: åœ¨sim_samurai21ã€sim_tm1510ã€simtraceç­‰è¾ƒæ–°é¡¹ç›®ä¸­ä½¿ç”¨ SAMURAI21DetectorConstruction.cc:204-213 SimtraceDetectorConstruction.cc:178-187

C2ç‰ˆæœ¬ï¼Œæä¾›äº†æ›´å¤§çš„å­”å¾„å’Œæ›´ç¨³å®šçš„æ”¯æ’‘ç»“æ„;

C1ç‰ˆæœ¬: Yæ–¹å‘å­”å¾„ä¸º40cm (400mm) ExitWindowC1Construction.cc:39-41
C2ç‰ˆæœ¬: Yæ–¹å‘å­”å¾„ä¸º80cm (800mm)ï¼Œæ¯”C1å¤§ä¸€å€ ExitWindowC2Construction.cc:43-45




konda çš„ simtrace æœ‰c2 

fix Bug. and run 

![alt text](assets/log202512/image-2.png)

cd $SMSIMDIR/work
$SMSIMDIR/sources/build/projects/simtrace/simtrace

don't show window

![alt text](assets/log202512/image-3.png)


![alt text](assets/log202512/image-6.png)


## 2025-12-15

why anaroot on the web 
```
https://ribf.riken.jp/RIBFDAQ/index.php?plugin=attach&refer=Tools%2FAnalysis%2FANAROOT%2FInstallation&openfile=anaroot_v4.6.2.tgz
```
 is different from anaroot in ribdana04
| å¯¹æ¯”é¡¹ | ribfana04 (æœ¬åœ° ANAROOT) | web ANAROOT |
|---|---|---|
| æ„å»ºå·¥å…· (Build system) | Autotools | CMake |
| é…ç½®æ–‡ä»¶ | configure.in + Makefile.am | CMakeLists.txt |
| å­¦ä¹ æ›²çº¿ | è¾ƒé™¡å³­ | ç›¸å¯¹å¹³ç¼“ |
| è·¨å¹³å° | ä¼˜ç§€ | ä¼˜ç§€ |
| IDE æ”¯æŒ | æœ‰é™ | åŸç”Ÿæ”¯æŒ |
| ä¾èµ–æ£€æŸ¥æ—¶æœº | è¿è¡Œæ—¶æ£€æŸ¥ | é…ç½®æ—¶æ£€æŸ¥ |


% kobayashi cite tree

% look for exit window set and rigid accuracacy
% ![alt text](assets/log202512/Map.png)




## 2025-12-16

todo 

- [x] why only simtrace is build after using cmake. default option
- [x]  what is exitwindowc1
- [ ] chekc filter after geo acceptence
- [ ] useing math to estimate the accuracy of reconstructed momentum. of rigid reconstruction

```
### default install projects  ---------------------------
option(use_simtrace "simple simulator of SAMURAI" ON)
option(use_crosssection "crosssection" ON)
option(use_get_pdgmass "get_pdgmass" ON)
```



https://ribf.riken.jp/SAMURAI/120425_SAMURAIConstProp.pdf

https://s3.cern.ch/inspire-prod-files-3/3c4ae5817492ea3c90d12a39dca4014b

https://www.sciencedirect.com/science/article/pii/S0168583X13007118

simdayone c1 exit window 

![alt text](assets/log202512/image-4.png)

![alt text](assets/log202512/image-6.png)


simtrace c2 exit window

![alt text](assets/log202512/image-5.png)



| å¯¹æ¯”ç±»å‹ \ version|c1 | c2 | è¯„è®º|
|------------|---|-----|-----|
| å‡ ä½•ä¸»ä½“ | ç®€å•çŸ©å½¢ç›’å­ (window_flange_box) | å¸¦æœ‰ä¸Šä¸‹åŠ å¼ºè‚‹/ç®¡åº§çš„å¤æ‚å¸ƒå°”ä½“ | V1 ç»“æ„éå¸¸ç®€å•ï¼Œä¼¼ä¹æ˜¯ V2 çš„æ¦‚å¿µç®€åŒ–ç‰ˆæˆ–æ—©æœŸåŸå‹ã€‚V2 æ›´åŠ æœºæ¢°å·¥ç¨‹åŒ–ï¼Œæ—¨åœ¨æé«˜å¼ºåº¦ã€‚ |
| ä¸»ä½“ææ–™ | é€»è¾‘ä½“ææ–™æ˜¯ G4_Galactic (çœŸç©º) | é€»è¾‘ä½“ææ–™æ˜¯ G4_Fe (é“) | é‡è¦å·®å¼‚ï¼V1 çš„ window_flange_log é€»è¾‘ä½“ææ–™è¢«é”™è¯¯åœ°è®¾ç½®ä¸ºçœŸç©ºï¼Œè€Œ V2 çš„ä¸»ä½“æ˜¯é“ï¼Œæ„å‘³ç€ V1 å¹¶æ²¡æœ‰æ¨¡æ‹Ÿæ³•å…°çš„å®ä½“éƒ¨åˆ†ï¼Œåªæ˜¯ä¸€ä¸ªçœŸç©ºåŒºåŸŸã€‚ |
| çª—è†œæ¨¡æ‹Ÿ | æœªå®šä¹‰ç‹¬ç«‹çš„è–„è†œã€‚ä¸­å¿ƒå­”æ´ (fWindowHole_log) è¢«æ”¾ç½®åœ¨æ³•å…°é€»è¾‘ä½“å†…éƒ¨ã€‚ | æœªå®šä¹‰ç‹¬ç«‹çš„è–„è†œã€‚ | ä¸¤ä¸ªç‰ˆæœ¬éƒ½ç¼ºä¹ V1 (ExitWindowN) ä¸­ 3 mm åšçš„çœŸå®çª—è†œç»“æ„ã€‚ |
| æ•´ä½“å°ºå¯¸ (XÃ—Y) | 3340.25 mm Ã— 1200 mm | 3340 mm Ã— 1200 mm | å°ºå¯¸åŸºæœ¬ç›¸åŒï¼Œä¸¤è€…éƒ½æ˜¯å¤§å‹æ³•å…°ã€‚ |
| ä¸­å¿ƒå­”å¾„ (XÃ—Y) | 2800 mm Ã— 400 mm | 2940 mm Ã— 800 mm | æ ¸å¿ƒå·®å¼‚ï¼V1 çš„ Y æ–¹å‘ï¼ˆå‚ç›´ï¼‰å­”å¾„ä¸º 400 mmï¼ˆç¬¦åˆæ³¨é‡Šä¸­çš„ 40 cmï¼‰ï¼Œè€Œ V2 çš„å­”å¾„æ˜¯ 800 mmã€‚ |
| ç»„ä»¶ä½ç½® (Z) | 3187.46 mm | 3187.46 mm | ä½ç½®å®Œå…¨ç›¸åŒã€‚ |




![alt text](assets/log202512/image-7.png)

the pdc position(boyuan default set) is not good if we use c1 exit window.



![alt text](assets/log202512/image-8.png)