# 2025 12 æœˆ notebook

## 2025-12-02

æ›´æ¢äº†qmdç‰¹å¾åŠ¨é‡çš„å¤§å°,ä»600MeV/cæ”¹ä¸º627MeV/c,ä»¥æ›´å¥½åœ°åŒ¹é…å®éªŒæ•°æ®.

Changed the QMD characteristic momentum from 600 MeV/c to 627 MeV/c to better match experimental data.

$P = \sqrt{(E)^2 - (m)^2} = \sqrt{(190+938)^2 - (938)^2} MeV/c = 625.5MeV/c$

## 2025-12-03

change homebrew g++ cmake root to conda-forge versions.

use micromaba . .yml to create a env for anaroot . useing root and geant4 in conda-forge

```yml
name: anaroot-env
channels:
  - conda-forge
dependencies:
  - python=3.10
  - cmake
  - make
  - git
  - wget
  - pkg-config
  - gcc_linux-64
  - gxx_linux-64
  - root
  - geant4
  - xerces-c
  - fftw
  - gsl
  - libxml2
  - libpng
  - zlib
  - swig
  - pip
  - xorg-libx11
  - xorg-libxpm
  - xorg-libxft

```

```
# åˆå§‹åŒ– micromamba
eval "$(micromamba shell hook -s bash)"  # æˆ– -s zsh

å¯é€‰ï¼šè‡ªåŠ¨æ¿€æ´» anaroot ç¯å¢ƒ
micromamba activate anaroot-env
```


direnv is an open-source extension that automatically loads and executes the environment variables and scripts defined in a .envrc file when you enter (cd into) a directory containing one. It automatically unloads those variables when you leave the directory.

```
# Auto-generated .envrc for Dpol_smsimulator
# This file will be executed by direnv when you cd into the project root.
# Ensure micromamba is initialized in this shell (zsh) before using `micromamba activate`.
# Keep this file small and review before allowing with `direnv allow`.

# Initialize micromamba shell hook for zsh (direnv runs this file with your login shell)
if command -v micromamba >/dev/null 2>&1; then
  eval "$(micromamba shell hook --shell zsh)"
fi

# Source the project setup which performs activation and exports variables
if [[ -f ./setup_spana.sh ]]; then
  source ./setup_spana.sh
fi
```


## 2025-12-05

æˆ‘å¸Œæœ›è°ƒå¤§åŠ¨é‡èŒƒå›´ã€‚ 

todo æ¢å¯»è´¨å­åŠ¨é‡ç©ºé—´ï¼ˆå¯è¢«æ¥å—çš„ç©ºé—´ï¼‰ç”»å‡ºä¸‰ç»´ç©ºé—´å›¾æ¥ï¼Œä»¥åŠåšå‡ºæ¥æ­¤æ—¶çš„pxp-pxn (æ— æ¨¡ç³Š åªfilter)

å–æ ·å¥½è¿˜æ˜¯å‚æ•°å–ç‚¹å¥½ã€‚ 

æ•°æ®çš„é€æ˜é€‰æ‹©,rootå¦‚ä½•åšåˆ°

I want to increase the momentum range. TODO: Explore the acceptable proton momentum space, visualize it in a 3D plot, and calculate $p_{p} - p_{n}$ (without blurring, only filtering). Which is better: sampling or parametric point scanning?



```bash
root -b -q $ROOTSYS/tutorials/legacy/benchmarks.C > rootbenchmarktest.txt
```

| name | root benchmark | cpu | description |   
|------|-----------------|-----|-------------|
| RIBFANA 04 | 5022 | Intel Xeon Gold 5218 @ 2.30GHz | riken |
| spana03| 4972 | Intel Xeon Platinum 8168 @ 2.70GHz | riken |
| ENPG | 2186 | Intel Xeon E5-2650 v4 @ 2.20GHz | zhigang group |
| SER5 MAX | 19444 | AMD Ryzen 7 5700H | tbt pc |
| Thinkpad X1 Carbon gen10 | 4945 | i7-1260P | tbt pc |

## 2025-12-9

ä½¿ç”¨hostname ä¸ºä¸åŒæœºå™¨åŠ è½½ä¸åŒçš„è½¯ä»¶è·¯å¾„

æŸ¥çœ‹rootæ•°æ®æ–‡ä»¶, 


## 2025-12-10

try to fix root .

.root æ–‡ä»¶è¢« TBrowser æ‰“å¼€ è‡ªåŠ¨å±•å¼€åµŒå¥—, åŠ è½½è‡ªå®šä¹‰ç±». éœ€è¦åˆ©ç”¨åå°„æœºåˆ¶. 

geant4 nebulaé‡Œé¢ä¼¼ä¹æ²¡æœ‰è¿™æ ·çš„å®ç°.  


https://tianbaiting.github.io/sci/minimal_code/cernrootData/


## 2025-12-11

fix vscode intellisense wrong include path . 

æ›´æ–°äº† c_cpp_properties.json:

æ·»åŠ äº† "compileCommands" å­—æ®µ,æŒ‡å‘ CMake ç”Ÿæˆçš„ç¼–è¯‘å‘½ä»¤æ•°æ®åº“
æ›´æ–°äº† C++ æ ‡å‡†ä¸º c++20 (ä¸ CMakeLists.txt ä¸€è‡´)
æ›´æ–°äº† CMakeLists.txt:

æ·»åŠ äº† set(CMAKE_EXPORT_COMPILE_COMMANDS ON),ç¡®ä¿æ¯æ¬¡ CMake é…ç½®æ—¶éƒ½ç”Ÿæˆ compile_commands.json
é‡æ–°é…ç½®äº† CMake:

ç”Ÿæˆäº† 113KB çš„ compile_commands.json æ–‡ä»¶,åŒ…å«æ‰€æœ‰ç¼–è¯‘å•å…ƒçš„å®Œæ•´ä¿¡æ¯



buy dpol detector åˆåŒ 


```
627*tan(10/180.0*TMath::Pi())
(double) 110.55702
```

![alt text](assets/log202512/image.png)

å…ˆåŠ  Neutron exit window,


æ ¹æ®konda çš„smsimulatoré‡Œé¢å„ç§é¡¹ç›®é‡Œ


```
  //------------------------------ exit window for neutrons
  fExitWindowNConstruction->ConstructSub();
  fExitWindowNConstruction->SetAngle(magAngle);
  fExitWindowNConstruction->PutExitWindow(experimentalHall_log);
  if (fNeutronWinSD==0){
    fNeutronWinSD = new FragmentSD("/NeutronWindow");
    SDMan->AddNewDetector(fNeutronWinSD);
```


```
//------------------------------ exit window for neutrons  
fExitWindowNConstruction->ConstructSub();  
fExitWindowNConstruction->SetAngle(magAngle);  
fExitWindowNConstruction->PutExitWindow(experimentalHall_log);  
  
if (fNeutronWinSD==0){  
  fNeutronWinSD = new FragmentSD("/NeutronWindow");  
  SDMan->AddNewDetector(fNeutronWinSD);  
}  
fExitWindowNConstruction->GetWindowVolume()->SetSensitiveDetector(fNeutronWinSD);
```

éœ€è¦åœ¨å¤´æ–‡ä»¶ä¸­æ·»åŠ çš„å£°æ˜
detector constructionå¤´æ–‡ä»¶ä¸­éœ€è¦æ·»åŠ ï¼š
```
class ExitWindowNConstruction;  
  
private:  
  ExitWindowNConstruction *fExitWindowNConstruction;  
  G4VSensitiveDetector* fNeutronWinSD;
```

æ„é€ å‡½æ•°ä¸­çš„åˆå§‹åŒ–
åœ¨æ„é€ å‡½æ•°ä¸­éœ€è¦åˆå§‹åŒ–ï¼š 

fExitWindowNConstruction = new ExitWindowNConstruction();

ææ„å‡½æ•°ä¸­çš„æ¸…ç†
åœ¨ææ„å‡½æ•°ä¸­éœ€è¦æ·»åŠ ï¼š

delete fExitWindowNConstruction;

å‘ç°æŠ¥é”™ device è‡ªæ¨¡å—å¦‚ä½•é›†æˆ. 

éœ€è¦é“¾æ¥smdevicesåº“

åœ¨smg4libé‡Œé¢æ·»åŠ , sim_deuteroné‡Œé¢æ·»åŠ , ç›¸å…³çš„cmakeè¯­å¥. 


![alt text](assets/log202512/image-1.png)


## 2025-12-12

æ·»åŠ  charged particle exit window 

 there are 2 exit windows 

 ```
libs/smg4lib/src/devices on î‚  main [âœ˜!?] via â–³ v3.31.6 via ğŸ v3.13.5 (.venv) 
â¯ tree                           
.
â”œâ”€â”€ CMakeLists.txt
â”œâ”€â”€ DipoleConstruction.cc
â”œâ”€â”€ DipoleConstruction.hh
â”œâ”€â”€ DipoleConstructionMessenger.cc
â”œâ”€â”€ DipoleConstructionMessenger.hh
â”œâ”€â”€ ExitWindowC1Construction.cc
â”œâ”€â”€ ExitWindowC1Construction.hh
â”œâ”€â”€ ExitWindowC2Construction.cc
â”œâ”€â”€ ExitWindowC2Construction.hh
â”œâ”€â”€ ExitWindowNConstruction.cc
â”œâ”€â”€ ExitWindowNConstruction.hh
â”œâ”€â”€ MagField.cc
â””â”€â”€ MagField.hh
```

C1ç‰ˆæœ¬: ä¸»è¦åœ¨simdayoneé¡¹ç›®ä¸­ä½¿ç”¨ DayoneDetectorConstruction.cc:198-210

C2ç‰ˆæœ¬: åœ¨sim_samurai21ã€sim_tm1510ã€simtraceç­‰è¾ƒæ–°é¡¹ç›®ä¸­ä½¿ç”¨ SAMURAI21DetectorConstruction.cc:204-213 SimtraceDetectorConstruction.cc:178-187

C2ç‰ˆæœ¬ï¼Œæä¾›äº†æ›´å¤§çš„å­”å¾„å’Œæ›´ç¨³å®šçš„æ”¯æ’‘ç»“æ„;

C1ç‰ˆæœ¬: Yæ–¹å‘å­”å¾„ä¸º40cm (400mm) ExitWindowC1Construction.cc:39-41
C2ç‰ˆæœ¬: Yæ–¹å‘å­”å¾„ä¸º80cm (800mm)ï¼Œæ¯”C1å¤§ä¸€å€ ExitWindowC2Construction.cc:43-45

