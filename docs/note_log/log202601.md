## 1-10

动量分辨率:

### 从角度方面来看,

动量 $p$ 与总偏转角 $\theta_{bend}$ 的关系由场积分 $\int B dl$ 决定：$$\theta_{bend} \approx \frac{0.3 \int B dl}{p}$$.


### 从位置方面看,

改变动量 得到$\frac{\partial{x}}{\partial{p}}$

或者说 是 P对pdc重建直线参数的导数. pdc重建直线参数误差可以通过

### Gluckstern公式

场内探测器:

R.L. Gluckstern 1963

对于在磁场中均匀分布的 $N$ 层探测器，仅由位置测量误差导致的横向动量分辨率为：$$\frac{\sigma_{p_T}}{p_T} = \frac{\sigma_{r\phi} \cdot p_T}{0.3 B L^2} \sqrt{\frac{720}{N+4}}$$


### 考虑和多次散射误差匹配


多重库仑散射（MCS）的限制


$$\theta_{MCS} \approx \frac{13.6 \text{ MeV}}{\beta c p} z \sqrt{\frac{x}{X_0}} [1 + 0.038 \ln(x/X_0)]$$

其中 $x/X_0$ 是以辐射长度为单位的材料厚度。注意到 $\theta_{MCS} \propto 1/p$。


### 重建改进

单参数优化

改为多参数优化




## 1-11

todo 

生成各个配置的pdc位置 mac文件 分文件夹存储.

vis.mac  氘核束流选项 和


原始段错误的原因是磁场文件格式与代码不匹配：

磁场文件 180703-1,40T-6000.table 使用 6000mm 范围、20mm 步长的网格
代码原本只支持 3000mm 范围、10mm 步长的网格
当代码用 v[0]/10 计算数组索引时，6000mm 范围的数据会产生超出数组边界的索引（如 600 > 300）
修复内容
MagField.hh: 添加了 fStepSize 和 fMaxRange 成员变量来存储网格参数

MagField.cc:

构造函数初始化新变量
.table 文件读取时自动检测文件格式（通过读取文件头中的 ny 值）
使用动态步长计算数组索引，并添加边界检查
.bin 文件读取支持新旧两种格式（自动兼容）
GetFieldValue 函数使用动态步长和范围进行插值计算

以及取消这一个变化. 转而下载合适的磁场文件.

##

