<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>smg4lib: 周工作汇报（近 7 天）</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">smg4lib
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">周工作汇报（近 7 天） </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>范围：2025-08-22 ～ 2025-08-28（近 7 天内的提交）</p>
<p>编写人：Baiting Tian</p>
<hr  />
<h1><a class="anchor" id="autotoc_md43"></a>
本周要点摘要</h1>
<ul>
<li>主要改动集中在：Tree 输入的交互稳定性修复、NEBULA converter 的空指针保护、为重建/可视化准备并完善若干宏与文档，以及若干与 PDC 绘图/几何相关的文件调整。</li>
<li>已新增调试、重建与查看用的宏和 README，便于复现与验证数据流。</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md45"></a>
提交明细（按时间倒序）</h1>
<ol type="1">
<li>5eb3201 — 2025-08-26 12:00:30 +0900<ul>
<li>作者：Baiting Tian</li>
<li>标题（缩写）：plot cathode wires</li>
<li>变更文件：多处新增/修改，包括 <code>d_work/geometry/*</code>、<code>d_work/macros/examples/*</code>、<code>sim_deuteron</code> 下若干文件等</li>
<li>要点：加入二维/三维 PDC 线结构绘图脚本、几何文件与示例宏，扩充示例和工具链。</li>
<li>验证：运行 <code>sim_deuteron</code> 的绘图脚本查看生成图像；确认几何文件在仿真中生效。</li>
</ul>
</li>
</ol>
<ol type="1">
<li>336877f — 2025-08-26 12:11:24 +0900<ul>
<li>作者：Baiting Tian</li>
<li>标题（缩写）：git ignore big files</li>
<li>变更文件：&lt;tt&gt;.gitignore 更新，同时删除一批大型 geometry 与临时文件的跟踪</li>
<li>要点：进一步清理仓库历史与不必要的大文件。</li>
</ul>
</li>
</ol>
<ol type="1">
<li>e47c1d6 — 2025-08-27 14:22:14 +0900<ul>
<li>作者：Baiting Tian</li>
<li>标题（缩写）：plot wires add legend</li>
<li>变更文件：重命名/移动与 PDC 绘图相关的文件，添加绘图资源（png）并移除过时副本。</li>
<li>要点：改进 PDC 电极线绘图脚本和图示资源。</li>
</ul>
</li>
</ol>
<ol type="1">
<li>5117c6f — 2025-08-27 14:26:11 +0900<ul>
<li>作者：Baiting Tian</li>
<li>标题（缩写）：remove large file</li>
<li>变更文件：更新 <code>.gitignore</code>，移除大文件历史记录（删除部分 build 临时文件）</li>
<li>要点：清理仓库，避免提交过大的中间文件。</li>
</ul>
</li>
</ol>
<ol type="1">
<li>a1fa8ee — 2025-08-27 15:46:48 +0900<ul>
<li>作者：Baiting Tian</li>
<li>标题（缩写）：add output tree readme.md</li>
<li>变更文件：新增 <code>d_work/macros/dpol/reconstruction/show_root_detail.cc</code>、<code><a class="el" href="README_8md.html">d_work/output_tree/README.md</a></code> 等</li>
<li>要点：补充输出树的查看说明与宏，方便分析人员使用。</li>
<li>验证：运行对应宏查看输出树结构与分支。</li>
</ul>
</li>
</ol>
<ol type="1">
<li>9a7b943 — 2025-08-28 16:08:12 +0900<ul>
<li>作者：Baiting Tian</li>
<li>标题（缩写）：add code of creating inputtree using TBeamSimdataarray</li>
<li>变更文件：新增多项（事件生成与转换相关脚本/宏），如 <code>d_work/analyze_frag.C</code>、<code>d_work/macros/dpol/EventGenerator/GenInputRoot_np_atime.cc</code> 等；并修改 <code>d_work/vis.mac</code>、<code>d_work/simulation.mac</code> 等</li>
<li>要点：加入生成输入 TTree 的示例代码和工具，完善事件生成 pipeline。</li>
<li>验证：用新脚本生成 input root，再用 <code><a class="el" href="classPrimaryGeneratorActionBasic.html">PrimaryGeneratorActionBasic</a></code> 的 Tree 模式读取并运行短例。</li>
</ul>
</li>
</ol>
<ol type="1">
<li>30e45cb — 2025-08-28 16:19:50 +0900<ul>
<li>作者：Baiting Tian</li>
<li>标题（缩写）：fix(NEBULA): guard against missing parameters in NEBULASimDataConverter</li>
<li>变更文件：<code>smg4lib/data/sources/src/NEBULASimDataConverter_TArtNEBULAPla.cc</code>（M）</li>
<li>要点：同上，具体实现文件中加入空指针校验与防护。</li>
<li>验证：见上条。</li>
</ul>
</li>
</ol>
<ol type="1">
<li>618e247 — 2025-08-28 16:22:35 +0900<ul>
<li>作者：Baiting Tian</li>
<li>标题（缩写）：上一个提交还干了，Add null-check for NEBULAParameter in ConvertSimData()</li>
<li>变更文件：若干库与中间目标（包括 smg4lib 的库文件变更）</li>
<li>要点：为 NEBULA converter 添加空检查、在缺少参数时跳过并打印警告、只有在参数有效后才创建 <code>TArtNEBULAPla</code>，以避免 placement-new 在无效数据上引起未定义行为。</li>
<li>验证：重建 <code>smg4lib</code>，运行短例观察是否仍有与 <code>TArtDataObject::Copy</code> 相关的 segfault。</li>
</ul>
</li>
</ol>
<ol type="1">
<li>5710084 — 2025-08-28 16:55:59 +0900<ul>
<li>作者：Baiting Tian</li>
<li>标题（缩写）：reconstruct one evnt to see pdc and nebula</li>
<li>变更文件：新增/修改多文件，包括 <code><a class="el" href="data__flow__README_8md.html">d_work/macros/dpol/data_flow_README.md</a></code>（A），<code>d_work/macros/dpol/reconstruction/reconstruct_one_event.cc</code>（M）等</li>
<li>要点：增加用于查看 PDC/NEBULA 数据的宏与数据流说明，便于在 <a class="el" href="namespaceROOT.html">ROOT</a> 中快速检查输出树内容。</li>
<li>验证：在 <code>d_work/macros/dpol/reconstruction</code> 中使用 <code>reconstruct_one_event.cc</code> 打开 <code>output_tree/test0000.root</code> 并打印示例信息。</li>
</ul>
</li>
</ol>
<ol type="1">
<li>708a72f — 2025-08-28 17:13:12 +0900<ul>
<li>作者：Baiting Tian</li>
<li>标题（缩写）：fix(action): keep Tree input TFile open after TreeBeamOn to allow repeated calls</li>
<li>变更文件：<code>smg4lib/action/src/PrimaryGeneratorActionBasic.cc</code>（修改）</li>
<li>要点：在 <code>TreeBeamOn</code> 结束时不再关闭输入 <a class="el" href="namespaceROOT.html">ROOT</a> 文件，修复在交互式会话中第二次调用 <code>/action/gun/tree/beamOn</code> 导致的崩溃问题。</li>
<li>验证：重建 <code>smg4lib</code> 与 <code>sim_deuteron</code>，在 UI 中两次执行 <code>/action/gun/tree/beamOn</code> 不应再发生 segfault。</li>
</ul>
</li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md47"></a>
本周验证状态（总体）</h1>
<ul>
<li>已完成：代码修改已保存；<code>sim_deuteron</code> 在本地有过 <code>make</code> 成功记录；若干查看宏可在 <a class="el" href="namespaceROOT.html">ROOT</a> 中运行（<code>reconstruct_one_event.cc</code> 已被执行）。</li>
</ul>
<p>输入 <img src="assets/WORK_REPORT_WEEK/image-2.png" alt="alt text" class="inline"/> <img src="assets/WORK_REPORT_WEEK/image-3.png" alt="alt text" class="inline"/></p>
<p>模拟 <img src="assets/WORK_REPORT_WEEK/image.png" alt="alt text" class="inline"/></p>
<p>读取模拟数据 <img src="assets/WORK_REPORT_WEEK/image-1.png" alt="alt text" class="inline"/></p>
<p>下一步， 调好各个数据结构。 特别是target相关设置。</p>
<p>熟悉输出结构的调用方式。</p>
<p>PDC阴极读出模拟？ 如何确定感应电荷，然后确定位置。 误差怎么加</p>
<p><img src="assets/WORK_REPORT_WEEK/image-4.png" alt="alt text" class="inline"/></p>
<p><img src="assets/WORK_REPORT_WEEK/3d05fc0f0bee14720dc36b2a8ed1fda.jpg" alt="alt text" class="inline"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
